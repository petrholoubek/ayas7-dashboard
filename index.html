<!-- AYAS-7 Menu s animovanou zelenou kostkou -->
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    background: #eef2f5;
  }

  #header {
    text-align: center;
    color: #003063;
    font-size: 2em;
    font-weight: bold;
    padding: 20px 0;
  }

  nav {
    background-color: #003063;
    padding: 10px 0;
  }

  nav ul {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    gap: 15px;
  }

  nav li {
    position: relative;
    font-weight: bold;
  }

  nav li a {
    text-decoration: none;
    color: white;
    padding: 10px 15px;
    display: block;
    transition: color 0.3s;
    position: relative;
    z-index: 1;
  }

  /* Animovaná zelená kostka */
  nav li::after {
    content: '';
    position: absolute;
    left: 50%;
    bottom: 0;
    transform: translateX(-50%) scaleY(0);
    width: 100%;
    height: 6px;
    background-color: #1da84f;
    border-radius: 3px;
    transition: transform 0.3s ease;
    pointer-events: none;
    transform-origin: bottom;
  }

  nav li:hover::after {
    transform: translateX(-50%) scaleY(1);
  }

  nav li:hover a {
    color: #1da84f;
  }

  nav li:last-child a {
    color: #1da84f;
  }
</style>

<div id="header">AYAS-7 Engine</div>

<nav>
  <ul>
    <li><a href="token-layer.html">AGS</a></li>
    <li><a href="liquidity-engine.html">TVL</a></li>
    <li><a href="yield-routing.html">LRE</a></li>
    <li><a href="risk-compliance.html">RIC</a></li>
    <li><a href="fintech-interaction.html">YRO</a></li>
    <li><a href="core-engine.html">RMC</a></li>
    <li><a href="dashboard-analytics.html">FIA</a></li>
    <li><a href="https://winwin.coop/#ww-onb" target="_blank" rel="noopener noreferrer">Win-Win</a></li>
  </ul>
</nav>
<!-- Konec menu -->

<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>AYAS-7 Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background:#f4f4f4;
    margin:0;
    padding:20px;
    display:flex;
    justify-content:center;
}
#main-container {
    max-width:1200px;
    width:100%;
    display:flex;
    flex-direction:column;
    gap:20px;
}
.row {
    display:flex;
    gap:20px;
    flex-wrap:wrap;
}
.left-box, .right-box {
    background:#fff;
    border-radius:8px;
    box-shadow:0 2px 6px rgba(0,0,0,0.1);
    padding:15px;
    flex:1;
    min-width:300px;
}
.left-box img { width:50px; height:50px; float:left; margin-right:10px; }
.layer-title { font-weight:bold; font-size:1.2em; }
.layer-desc { margin:5px 0 10px 0; }
.token-box { display:flex; gap:10px; margin-bottom:10px; }
.token { flex:1; text-align:center; padding:5px; border-radius:5px; color:#fff; font-weight:bold; }
.usd { background:#1da84f; }
.gusd { background:#007bff; }
.right-box h4 { margin:5px 0; }
.right-box label { display:block; margin:5px 0; }
.right-box button { margin-top:5px; padding:5px 10px; border:none; background:#003063; color:white; border-radius:5px; cursor:pointer; }
canvas { background:#f9f9f9; border-radius:5px; margin-top:10px; }
@media(max-width:1000px){ .row { flex-direction:column; } }
</style>
</head>
<body>

<div id="main-container">

<script>
const layers = [
    {id:1, name:"Layer 1: Token Layer", desc:"Správa tokenů USDt.z a GUSD"},
    {id:2, name:"Layer 2: Liquidity Engine", desc:"Řízení likvidity a strategií"},
    {id:3, name:"Layer 3: Yield Routing", desc:"Optimalizace zhodnocení"},
    {id:4, name:"Layer 4: Risk & Compliance", desc:"Řízení rizik a audit"},
    {id:5, name:"Layer 5: FinTech Interaction", desc:"Interakce s členy a reporting"},
    {id:6, name:"Layer 6: Core Engine", desc:"Výpočetní jádro motoru"},
    {id:7, name:"Layer 7: Dashboard Layer", desc:"Vizualizace a přehled výkonu"}
];

function getCurrentRate() { return 0.04; } // 1 CZK = 0.04 USDT.z
function generateGUSD() { return Math.floor(Math.random()*10000)+1000; } // demo

layers.forEach(layer=>{
    document.write(`
    <div class="row">
        <div class="left-box">
            <img src="https://raw.githubusercontent.com/petrholoubek/ayas7-dashboard/main/assets/${layer.id}.png" alt="Layer ${layer.id}">
            <div class="layer-title">${layer.name}</div>
            <div class="layer-desc">${layer.desc}</div>
            <div class="token-box">
                <div class="token usd">USDT.z: <span id="usd-${layer.id}">0</span></div>
                <div class="token gusd">GUSD: <span id="gusd-${layer.id}">0</span></div>
            </div>
            <canvas id="line-${layer.id}" height="100"></canvas>
        </div>

        <div class="right-box">
            <h4>Přidat člena</h4>
            <label>Jméno: <input type="text" id="name-${layer.id}" value="Petr Holoubek"></label>
            <label>Email: <input type="email" id="email-${layer.id}" value="petr@example.com"></label>
            <label>Telefon: <input type="text" id="phone-${layer.id}" value="123456789"></label>
            <label>Vklad (CZK): <input type="number" id="member-${layer.id}" value="15000"></label>
            <button onclick="addMember(${layer.id})">Přidat člena</button>
            <div>WW-KEY: <span id="ww-${layer.id}">0</span></div>
            <div>Aktuální kurz: <span id="rate-${layer.id}">0</span></div>
            <canvas id="bar-${layer.id}" height="100"></canvas>
            <div>Živá data DEX: <span id="dex-${layer.id}">0</span></div>
        </div>
    </div>
    `);
});

// Inicializace grafů a funkce
layers.forEach(layer=>{
    const ctxLine = document.getElementById(`line-${layer.id}`).getContext('2d');
    layer.lineChart = new Chart(ctxLine,{
        type:'line',
        data:{labels:["Týden 1","Týden 2","Týden 3","Týden 4"],datasets:[{label:'Výkon', data:[0,0,0,0], borderColor:'orange', tension:0.3, fill:false}]},
        options:{responsive:true,plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}}
    });

    const ctxBar = document.getElementById(`bar-${layer.id}`).getContext('2d');
    layer.barChart = new Chart(ctxBar,{
        type:'bar',
        data:{labels:["Družstvo"], datasets:[{label:'Zhodnocení %', data:[0], backgroundColor:'green'}]},
        options:{responsive:true,plugins:{legend:{display:false}},scales:{y:{beginAtZero:true,min:0,max:10}}}
    });
});

function addMember(id){
    const vkladCZK = Number(document.getElementById(`member-${id}`).value);
    const rate = getCurrentRate();
    const usdt = +(vkladCZK*rate).toFixed(2);
    const gusd = generateGUSD();
    const ww_key = usdt;

    document.getElementById(`usd-${id}`).innerText=usdt;
    document.getElementById(`gusd-${id}`).innerText=gusd;
    document.getElementById(`ww-${id}`).innerText=ww_key;

    const layer = layers.find(l=>l.id===id);
    layer.lineChart.data.datasets[0].data = layer.lineChart.data.datasets[0].data.map(d=>d+usdt/10);
    layer.lineChart.update();

    layer.barChart.data.datasets[0].data = [Math.random()*6+4];
    layer.barChart.update();

    document.getElementById(`dex-${id}`).innerText=(Math.random()*1000).toFixed(2);
    document.getElementById(`rate-${id}`).innerText=rate.toFixed(2);
}
</script>

</div>
</body>
</html>
